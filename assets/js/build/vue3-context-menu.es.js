import{z as te,Y as ue,D as R,Z as N,$ as q,E as xe,L as he,a0 as Ce,a1 as n,e as z,o as b,b as G,c as F,u as ae,s as D,a as U,x as ge,d as me,t as Te,w as le,a2 as Ue,a3 as Xe,r as Ye,q as Ge,F as Fe,a4 as Je,a5 as Qe,a6 as qe,a7 as at,m as be,R as Ae,Q as ze,U as pe,J as ut,a8 as je}from"./vue-router.js";let ee=null;function st(){return ee!==null}function it(e){ee&&et(),ee=e}function $e(e){e===ee&&(ee=null)}function et(){ee&&(ee.closeMenu(),ee=null)}const Z={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultZoom:1,defaultAdjustPadding:{x:0,y:10}};function de(e,l){let a=e.offsetTop;return e.offsetParent!=null&&e.offsetParent!=l&&(a-=e.offsetParent.scrollTop,a+=de(e.offsetParent,l)),a}function ve(e,l){let a=e.offsetLeft;return e.offsetParent!=null&&e.offsetParent!=l&&(a-=e.offsetParent.scrollLeft,a+=ve(e.offsetParent,l)),a}function rt(e,l,a,r){return{x:ve(e,r)+l,y:de(e,r)+a}}const We="mx-menu-default-container",ct="mx-menu-container-";let dt=0;function tt(e){const{getContainer:l,zIndex:a}=e;if(l){const d=typeof l=="function"?l():l;if(d){let t=d.getAttribute("id");return t||(t=ct+dt++,d.setAttribute("id",t)),{eleId:t,container:d,isNew:!1}}}let r=document.getElementById(We);return r||(r=document.createElement("div"),r.setAttribute("id",We),r.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(r)),r.style.zIndex=(a==null?void 0:a.toString())||Z.defaultZindex.toString(),{eleId:We,container:r,isNew:!0}}function Ee(e){return typeof e=="number"?`${e}px`:e}const Q=te({props:{vnode:{type:null},data:{type:null,default:null}},setup(e){const{vnode:l,data:a}=ue(e);return()=>typeof l.value=="function"?l.value(a.value):l.value}});function vt(e,l){const a={...e};return delete a[l],a}var ft=Object.defineProperty,ht=(e,l,a)=>l in e?ft(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,_e=(e,l,a)=>ht(e,typeof l!="symbol"?l+"":l,a);class De{constructor(l,a){_e(this,"x",0),_e(this,"y",0),this.x=l||0,this.y=a||0}set(l,a){this.x=l,this.y=a}substract(l){this.x-=l.x,this.y-=l.y}}function Ne(e){const{onDown:l,onMove:a,onUp:r}=e,d=new De,t=new De;let h;function i(m){m.stopPropagation(),t.set(m.x,m.y),t.substract(d),a(d,t,m,h)}function I(m){r(m,h),d.set(0,0),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",I)}return(m,k)=>l(m,k)?(h=k,d.set(m.x,m.y),document.addEventListener("mousemove",i),document.addEventListener("mouseup",I),m.stopPropagation(),!0):!1}function mt(e,l){let a=0;return{start(){a>0&&clearInterval(a),a=setInterval(()=>{a=0,l()},e)},stop(){a>0&&(clearInterval(a),a=0)}}}const ce=[],Ve=mt(100,()=>{for(const e of ce)e()});function pt(e,l,a,r){let d=0,t=0;function h(){e.value&&(l&&d!==e.value.offsetWidth&&l(e.value.offsetWidth),a&&t!==e.value.offsetHeight&&a(e.value.offsetHeight),r&&(d!==e.value.offsetWidth||t!==e.value.offsetHeight)&&r(e.value.offsetWidth,e.value.offsetHeight),d=e.value.offsetWidth,t=e.value.offsetHeight)}return{startResizeChecker(){Ve.start(),ce.push(h)},stopResizeChecker(){const i=ce.indexOf(h);i>=0&&ce.splice(i,1),ce.length===0&&Ve.stop()}}}const Ke=140,gt=70,bt=te({__name:"ScrollRect",props:{scroll:{type:String,default:"both"},scrollBarAlwaysShow:{type:Boolean,default:!1},scrollBarBackgroundClickable:{type:Boolean,default:!1},height:{type:Number,default:void 0},width:{type:Number,default:void 0},maxHeight:{type:Number,default:void 0},maxWidth:{type:Number,default:void 0},containerClass:{type:String,default:""},containerStyle:{type:null}},emits:["scroll","resized"],setup(e,{expose:l,emit:a}){const r=e,d=a,t=R(),h=R(),i=R(),I=R(),m=R(),k=R(),B=R(!1),$=Ae(()=>r.scroll==="horizontal"||r.scroll==="both"),M=Ae(()=>r.scroll==="vertical"||r.scroll==="both"),x=ze({show:!1,size:0,sizeRaw:0,pos:0}),C=ze({show:!1,size:0,sizeRaw:0,pos:0});let P=0,v=0,w=0,O=0,T=null;const j={attributes:!0,childList:!0};function c(){if(t.value){if(x.show){const o=t.value.offsetWidth/t.value.scrollWidth;x.sizeRaw=o*t.value.offsetWidth,x.size=o*100,x.pos=t.value.scrollLeft/(t.value.scrollWidth-t.value.offsetWidth)*(100-x.size),o>=1&&(x.show=!1)}if(C.show){const o=t.value.offsetHeight/t.value.scrollHeight;C.sizeRaw=o*t.value.offsetHeight,C.size=o*100,C.pos=t.value.scrollTop/(t.value.scrollHeight-t.value.offsetHeight)*(100-C.size),o>=1&&(C.show=!1)}d("scroll",t.value.scrollLeft,t.value.scrollTop)}}function g(o=!1){if(!t.value)return;let W=$.value,L=M.value;const ke=W&&(P!==t.value.scrollWidth||w!==t.value.offsetWidth),Me=M&&(v!==t.value.scrollHeight||O!==t.value.offsetHeight);if(!o&&!ke&&!Me)return;const oe=window.getComputedStyle(t.value);(oe.overflow==="hidden"||oe.overflowX==="hidden")&&(W=!1),(oe.overflow==="hidden"||oe.overflowY==="hidden")&&(L=!1),x.show=W,C.show=L,c(),w=t.value.offsetWidth,O=t.value.offsetHeight,P=t.value.scrollWidth,v=t.value.scrollHeight,d("resized",P,v)}function H(o){var W;r.scroll=="horizontal"&&(o.deltaMode==0&&((W=t.value)==null||W.scrollTo({left:t.value.scrollLeft+(o.deltaY>0?Ke:-140),behavior:"smooth"})),o.preventDefault(),o.stopPropagation())}function E(o){var W;o.deltaMode==0&&((W=t.value)==null||W.scrollTo({left:t.value.scrollLeft+(o.deltaY>0?Ke:-140),behavior:"smooth"}),o.preventDefault(),o.stopPropagation())}function K(o){var W;o.deltaMode==0&&((W=t.value)==null||W.scrollTo({top:t.value.scrollTop+(o.deltaY>0?gt:-70),behavior:"smooth"}),o.preventDefault(),o.stopPropagation())}let J=0,_=0,p=0,A=0;const V=Ne({onDown(o){return!i.value||!m.value?!1:(J=o.offsetX,_=o.x-o.offsetX-m.value.offsetLeft,o.preventDefault(),B.value=!0,!0)},onMove(o,W,L){t.value&&i.value&&(u(L.x-J-_),L.preventDefault(),L.stopPropagation())},onUp(){B.value=!1}}),X=Ne({onDown(o){return!I.value||!k.value?!1:(p=o.offsetY,A=o.y-o.offsetY-k.value.offsetTop,o.preventDefault(),B.value=!0,!0)},onMove(o,W,L){t.value&&I.value&&(f(L.y-p-A),L.preventDefault(),L.stopPropagation())},onUp(){B.value=!1}});function y(o){t.value&&(t.value.scrollLeft=o/100*(t.value.scrollWidth-t.value.offsetWidth))}function ne(o){t.value&&(t.value.scrollLeft=o/100*(t.value.scrollHeight-t.value.offsetHeight))}function u(o){t.value&&(t.value.scrollLeft=o/(t.value.offsetWidth-x.sizeRaw)*(t.value.scrollWidth-t.value.offsetWidth))}function f(o){t.value&&(t.value.scrollTop=o/(t.value.offsetHeight-C.sizeRaw)*(t.value.scrollHeight-t.value.offsetHeight))}function S(o){r.scrollBarBackgroundClickable&&u(o.offsetX-x.sizeRaw/2)}function s(o){r.scrollBarBackgroundClickable&&f(o.offsetY-C.sizeRaw/2)}const{startResizeChecker:se,stopResizeChecker:Y}=pt(t,()=>g(),()=>g());return xe(()=>{he(()=>{setTimeout(()=>g(!0),200),g(!0),se(),T=new MutationObserver(()=>g()),T.observe(t.value,j)})}),Ce(()=>{Y(),T&&(T.disconnect(),T=null)}),l({refreshScrollState(){g(!0)},getScrollContainer(){return t.value},scrollTo(o,W){var L;(L=t.value)==null||L.scrollTo(o,W)},scrollToTop(){var o;(o=t.value)==null||o.scrollTo(0,0)},scrollToBottom(){var o;(o=t.value)==null||o.scrollTo(t.value.scrollWidth,t.value.scrollHeight)}}),(o,W)=>(b(),G("div",{ref_key:"scrollrect",ref:h,class:ae(["vue-scroll-rect",e.scrollBarAlwaysShow?"always-show-scrollbar":"",e.scrollBarBackgroundClickable?"background-clickable":"",B.value?"dragging":""]),style:pe({width:e.width?`${e.width}px`:void 0,height:e.height?`${e.height}px`:void 0}),onWheel:H},[U("div",{ref_key:"container",ref:t,class:ae(["scroll-content",e.scroll,e.containerClass]),style:pe({maxWidth:e.maxWidth?`${e.maxWidth}px`:void 0,maxHeight:e.maxHeight?`${e.maxHeight}px`:void 0,...e.containerStyle}),onScroll:c},[D(o.$slots,"default")],38),x.show?D(o.$slots,"scrollBarX",{key:0,scrollBarValue:x,onScroll:y},()=>[U("div",{ref_key:"scrollBarRefX",ref:i,class:"scrollbar horizontal",onClick:S,onWheel:E},[U("div",{class:"thumb",ref_key:"scrollBarThumbRefX",ref:m,style:pe({left:`${x.pos}%`,width:`${x.size}%`}),onMousedown:W[0]||(W[0]=(...L)=>n(V)&&n(V)(...L)),onWheel:E},null,36)],544)]):z("",!0),C.show?D(o.$slots,"scrollBarY",{key:1,scrollBarValue:C,onScroll:ne},()=>[C.show?(b(),G("div",{key:0,ref_key:"scrollBarRefY",ref:I,class:"scrollbar vertical",onClick:s,onWheel:K},[U("div",{class:"thumb",ref_key:"scrollBarThumbRefY",ref:k,style:pe({top:`${C.pos}%`,height:`${C.size}%`}),onMousedown:W[1]||(W[1]=(...L)=>n(X)&&n(X)(...L)),onWheel:K},null,36)],544)):z("",!0)]):z("",!0)],38))}}),Ie=(e,l)=>{const a=e.__vccOpts||e;for(const[r,d]of l)a[r]=d;return a},yt={},xt={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},Ct=U("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),kt=[Ct];function Mt(e,l){return b(),G("svg",xt,kt)}const St=Ie(yt,[["render",Mt]]),wt={},Wt={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},It=U("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),Ht=[It];function Pt(e,l){return b(),G("svg",Wt,Ht)}const Rt=Ie(wt,[["render",Pt]]),Ot={class:"mx-item-row"},Bt=["xlink:href"],Lt={key:1,class:"label"},Tt={class:"mx-item-row"},Ft={class:"mx-shortcut"},He=te({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(e,{expose:l,emit:a}){const r=e,d=a,{clickHandler:t,clickClose:h,clickableWhenHasChildren:i,disabled:I,hidden:m,label:k,icon:B,iconFontClass:$,showRightArrow:M,shortcut:x,hasChildren:C}=ue(r),P=R(!1),v=R(!1),w=R(),O=N("globalOptions"),T=N("globalHasSlot"),j=N("globalRenderSlot"),c=N("globalCloseMenu"),g=N("menuContext"),H={getSubMenuInstance:()=>{},showSubMenu:()=>P.value?(g.markActiveMenuItem(H,!0),!0):C.value?(K(),!0):!1,hideSubMenu:()=>{g.closeOtherSubMenu()},isDisabledOrHidden:()=>I.value||m.value,getElement:()=>w.value,focus:()=>v.value=!0,blur:()=>v.value=!1,click:E};q("menuItemInstance",H),xe(()=>{g.isMenuItemDataCollectedFlag()?he(()=>{let p=0;const A=g.getElement();if(A){let V=0;for(let X=0;X<A.children.length;X++){const y=A.children[X];if(y.getAttribute("data-type")==="ContextMenuItem"){if(y===w.value){p=V;break}V++}}}g.addChildMenuItem(H,p)}):g.addChildMenuItem(H)}),Ce(()=>{g.removeChildMenuItem(H)});function E(p){if(!I.value){if(p){const A=p.target;if(A.classList.contains("mx-context-no-clickable")||O.value.ignoreClickClassName&&A.classList.contains(O.value.ignoreClickClassName))return;if(O.value.clickCloseClassName&&A.classList.contains(O.value.clickCloseClassName)){p.stopPropagation(),c(r.rawMenuItem);return}}C.value?i.value?(typeof t.value=="function"&&t.value(p),d("click",p)):P.value||K():(typeof t.value=="function"&&t.value(p),d("click",p),h.value&&c(r.rawMenuItem))}}function K(p){v.value=!1,g.checkCloseOtherSubMenuTimeOut()||g.closeOtherSubMenu(),I.value||(g.markActiveMenuItem(H),C.value&&(p||g.markThisOpenedByKeyBoard(),g.addOpenedSubMenu(J),P.value=!0,he(()=>d("subMenuOpen",H))))}function J(){v.value=!1,P.value=!1,d("subMenuClose",H)}function _(){return{disabled:I.value,label:k.value,icon:B.value,iconFontClass:$.value,showRightArrow:M.value,clickClose:h.value,clickableWhenHasChildren:i.value,shortcut:x.value,theme:O.value.theme,isOpen:P,hasChildren:C,onClick:E,onMouseEnter:K,closeMenu:c}}return l(H),(p,A)=>n(m)?z("",!0):(b(),G("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:w,"data-type":"ContextMenuItem"},[n(T)("itemRender")?(b(),F(n(Q),{key:0,vnode:()=>n(j)("itemRender",_())},null,8,["vnode"])):e.customRender?(b(),F(n(Q),{key:1,vnode:e.customRender,data:_()},null,8,["vnode","data"])):(b(),G("div",{key:2,class:ae(["mx-context-menu-item",n(I)?"disabled":"",v.value?"keyboard-focus":"",e.customClass?" "+e.customClass:"",P.value?"open":""]),onClick:E,onMouseenter:K},[D(p.$slots,"default",{},()=>[U("div",Ot,[U("div",{class:ae(["mx-icon-placeholder",e.preserveIconWidth?"preserve-width":""])},[D(p.$slots,"icon",{},()=>[n(T)("itemIconRender")?(b(),F(n(Q),{key:0,vnode:()=>n(j)("itemIconRender",_())},null,8,["vnode"])):typeof e.svgIcon=="string"&&e.svgIcon?(b(),G("svg",ge({key:1,class:"icon svg"},e.svgProps),[U("use",{"xlink:href":e.svgIcon},null,8,Bt)],16)):typeof n(B)!="string"?(b(),F(n(Q),{key:2,vnode:n(B),data:n(B)},null,8,["vnode","data"])):typeof n(B)=="string"&&n(B)!==""?(b(),G("i",{key:3,class:ae(n(B)+" icon "+n($)+" "+n(O).iconFontClass)},null,2)):z("",!0)]),e.checked?D(p.$slots,"check",{key:0},()=>[n(T)("itemCheckRender")?(b(),F(n(Q),{key:0,vnode:()=>n(j)("itemCheckRender",_())},null,8,["vnode"])):z("",!0),me(St)]):z("",!0)],2),D(p.$slots,"label",{},()=>[n(T)("itemLabelRender")?(b(),F(n(Q),{key:0,vnode:()=>n(j)("itemLabelRender",_())},null,8,["vnode"])):typeof n(k)=="string"?(b(),G("span",Lt,Te(n(k)),1)):(b(),F(n(Q),{key:2,vnode:n(k),data:n(k)},null,8,["vnode","data"]))])]),U("div",Tt,[n(x)||p.$slots.shortcut?D(p.$slots,"shortcut",{key:0},()=>[n(T)("itemShortcutRender")?(b(),F(n(Q),{key:0,vnode:()=>n(j)("itemShortcutRender",_())},null,8,["vnode"])):z("",!0),U("span",Ft,Te(n(x)),1)]):z("",!0),n(M)?D(p.$slots,"rightArrow",{key:1},()=>[n(T)("itemRightArrowRender")?(b(),F(n(Q),{key:0,vnode:()=>n(j)("itemRightArrowRender",_())},null,8,["vnode"])):z("",!0),me(Rt)]):z("",!0)])])],34)),n(O).menuTransitionProps?(b(),F(Xe,Ue(ge({key:3},n(O).menuTransitionProps)),{default:le(()=>[P.value?D(p.$slots,"submenu",{key:0,context:H}):z("",!0)]),_:3},16)):P.value?D(p.$slots,"submenu",{key:4,context:H}):z("",!0)],512))}}),At=te({name:"ContextMenuSperator",components:{VNodeRender:Q},setup(){const e=N("globalHasSlot"),l=N("globalRenderSlot");return{globalHasSlot:e,globalRenderSlot:l}}}),zt={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function jt(e,l,a,r,d,t){const h=Ye("VNodeRender");return e.globalHasSlot("separatorRender")?(b(),F(h,{key:0,vnode:()=>e.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(b(),G("div",zt))}const fe=Ie(At,[["render",jt]]),ye=te({__name:"ContextSubMenu",props:{items:{type:Object,default:null},maxHeight:{type:Number,default:0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"},parentMenuItemContext:{type:Object,default:null}},setup(e,{expose:l}){const a=e,r=R(!1),d=N("globalGetMenuHostId",""),t=N("menuContext"),h=N("globalOptions");N("globalHasSlot"),N("globalRenderSlot");const{zIndex:i,getParentWidth:I,getParentHeight:m,getZoom:k}=t,{adjustPosition:B}=ue(a),$=R(),M=R(),x=R(),C=[],P=N("globalSetCurrentSubMenu"),v=[];let w=null,O=0;function T(){w&&w.blur()}function j(u,f){if(u){for(let S=f!==void 0?f:0;S<v.length;S++)if(!v[S].isDisabledOrHidden()){c(S);break}}else for(let S=f!==void 0?f:v.length-1;S>=0;S--)if(!v[S].isDisabledOrHidden()){c(S);break}}function c(u){var f;if(w&&T(),u!==void 0&&(w=v[Math.max(0,Math.min(u,v.length-1))]),!w)return;w.focus();const S=w.getElement();S&&((f=$.value)==null||f.scrollTo(0,Math.min(Math.max(-A.value,-S.offsetTop-S.offsetHeight+V.value),0)))}function g(){P(H)}const H={isTopLevel:()=>t.getParentContext()===null,closeSelfAndActiveParent:()=>{const u=J.getParentContext();if(u){u.closeOtherSubMenu();const f=u.getSubMenuInstanceContext();if(f)return f.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var u;return(u=J.getParentContext())==null?void 0:u.closeOtherSubMenu()},moveCurrentItemFirst:()=>j(!0),moveCurrentItemLast:()=>j(!1),moveCurrentItemDown:()=>j(!0,w?v.indexOf(w)+1:0),moveCurrentItemUp:()=>j(!1,w?v.indexOf(w)-1:0),focusCurrentItem:()=>c(),openCurrentItemSubMenu:()=>w?w==null?void 0:w.showSubMenu():!1,triggerCurrentItemClick:u=>w==null?void 0:w.click(u)};let E=!1,K=!1;const J={zIndex:i+1,container:t.container,adjustPadding:h.value.adjustPadding||Z.defaultAdjustPadding,getParentWidth:()=>{var u;return((u=x.value)==null?void 0:u.offsetWidth)||0},getParentHeight:()=>{var u;return((u=x.value)==null?void 0:u.offsetHeight)||0},getPositon:()=>[y.value.x,y.value.y],getZoom:()=>h.value.zoom||Z.defaultZoom,addOpenedSubMenu(u){C.push(u)},closeOtherSubMenu(){C.forEach(u=>u()),C.splice(0,C.length),P(H)},checkCloseOtherSubMenuTimeOut(){return O?(clearTimeout(O),O=0,!0):!1},closeOtherSubMenuWithTimeOut(){O=setTimeout(()=>{O=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(u,f)=>{f===void 0?v.push(u):v.splice(f,0,u)},removeChildMenuItem:u=>{v.splice(v.indexOf(u),1),u.getSubMenuInstance=()=>{}},markActiveMenuItem:(u,f=!1)=>{T(),w=u,f&&c()},markThisOpenedByKeyBoard:()=>{E=!0},isOpenedByKeyBoardFlag:()=>E?(E=!1,!0):!1,isMenuItemDataCollectedFlag:()=>K,getElement:()=>x.value||null,getParentContext:()=>t,getSubMenuInstanceContext:()=>H};q("menuContext",J);const _={getChildItem:u=>v[u],getMenuDimensions:()=>M.value?{width:M.value.offsetWidth,height:M.value.offsetHeight}:{width:0,height:0},getSubmenuRoot:()=>M.value,getMenu:()=>x.value,getScrollValue:()=>{var u,f;return((f=(u=$.value)==null?void 0:u.getScrollContainer())==null?void 0:f.scrollTop)||0},setScrollValue:u=>{var f;return(f=$.value)==null?void 0:f.scrollTo(0,u)},getScrollHeight:()=>A.value,adjustPosition:()=>{ne()},getMaxHeight:()=>V.value,getPosition:()=>y.value,setPosition:(u,f)=>{y.value.x=u,y.value.y=f}},p=N("menuItemInstance",void 0);p&&(p.getSubMenuInstance=()=>_);const A=R(0),V=R(0),X=R(!1),y=R({x:0,y:0});function ne(){he(()=>{const u=x.value,f=M.value;if(u&&f&&$.value){const{container:S}=t,s=(I==null?void 0:I())??0,se=(m==null?void 0:m())??0,Y=getComputedStyle(f),o=parseFloat(Y.paddingLeft),W=parseFloat(Y.paddingTop),L=se>0?W:0,ke=document.documentElement.scrollHeight/k(),Me=document.documentElement.scrollWidth/k(),oe=Math.min(Me,S.offsetWidth),Pe=Math.min(ke,S.offsetHeight);let Se=ve(u,S),we=de(u,S);a.direction.includes("l")?y.value.x-=u.offsetWidth+o:a.direction.includes("r")?y.value.x+=s+o:(y.value.x+=s/2,y.value.x-=(u.offsetWidth+o)/2),a.direction.includes("t")?y.value.y-=(u.offsetHeight+W*2)/k():a.direction.includes("b")?y.value.y-=W/k():y.value.y-=(u.offsetHeight+W)/2/k(),he(()=>{var Re,Oe;Se=ve(u,S),we=de(u,S);const Be=((Oe=(Re=$.value)==null?void 0:Re.getScrollContainer())==null?void 0:Oe.scrollHeight)||0,lt=a.maxHeight;A.value=a.maxHeight?Math.min(Be,a.maxHeight):Be;const ot=Se+u.offsetWidth-oe,Le=we+A.value+L*2-Pe;if(X.value=Le>0,B.value&&ot>0){const ie=s+u.offsetWidth-o,re=Se;ie>re?y.value.x-=re:y.value.x-=ie}if(X.value){if(B.value){const ie=Le,re=we;ie>re?y.value.y-=re-L:y.value.y-=ie-L}V.value=Pe-(y.value.y+W)}else V.value=lt||0})}u==null||u.focus({preventScroll:!0}),t.isOpenedByKeyBoardFlag()&&j(!0),K=!0})}return xe(()=>{var u;r.value=!0;const f=(u=a.parentMenuItemContext)==null?void 0:u.getElement();if(f){const S=ve(f,t.container),s=de(f,t.container);y.value.x=S,y.value.y=s}else{const[S,s]=t.getPositon();y.value.x=S,y.value.y=s}P(H),ne()}),Ce(()=>{r.value=!1,p&&(p.getSubMenuInstance=()=>{})}),l(_),(u,f)=>{const S=Ye("ContextSubMenu",!0);return r.value?(b(),F(Qe,{key:0,to:`#${n(d)}`},[U("div",ge({ref_key:"submenuRoot",ref:M},u.$attrs,{class:["mx-context-menu",n(h).customClass?n(h).customClass:"",n(h).theme??""],style:{maxWidth:e.maxWidth?n(Ee)(e.maxWidth):`${n(Z).defaultMaxWidth}px`,minWidth:e.minWidth?n(Ee)(e.minWidth):`${n(Z).defaultMinWidth}px`,zIndex:n(i),left:`${y.value.x}px`,top:`${y.value.y}px`},"data-type":"ContextSubMenu",onClick:g}),[me(n(bt),{ref_key:"scrollRectRef",ref:$,scroll:"vertical",maxHeight:V.value,containerClass:"mx-context-menu-scroll"},{default:le(()=>[U("div",{class:ae(["mx-context-menu-items"]),ref_key:"menu",ref:x},[D(u.$slots,"default",{},()=>[(b(!0),G(Fe,null,Ge(e.items,(s,se)=>(b(),G(Fe,{key:se},[s.hidden!==!0&&s.divided==="up"?(b(),F(fe,{key:0})):z("",!0),s.hidden!==!0&&s.divided==="self"?(b(),F(fe,{key:1})):(b(),F(He,{key:2,clickHandler:s.onClick?Y=>s.onClick(Y):void 0,disabled:typeof s.disabled=="object"?s.disabled.value:s.disabled,hidden:typeof s.hidden=="object"?s.hidden.value:s.hidden,icon:s.icon,iconFontClass:s.iconFontClass,svgIcon:s.svgIcon,svgProps:s.svgProps,label:s.label,customRender:s.customRender,customClass:s.customClass,checked:typeof s.checked=="object"?s.checked.value:s.checked,shortcut:s.shortcut,clickClose:s.clickClose,clickableWhenHasChildren:s.clickableWhenHasChildren,preserveIconWidth:s.preserveIconWidth!==void 0?s.preserveIconWidth:n(h).preserveIconWidth,showRightArrow:s.children&&s.children.length>0,hasChildren:s.children&&s.children.length>0,rawMenuItem:s,onSubMenuOpen:Y=>{var o;return(o=s.onSubMenuOpen)==null?void 0:o.call(s,Y)},onSubMenuClose:Y=>{var o;return(o=s.onSubMenuClose)==null?void 0:o.call(s,Y)}},Je({_:2},[s.children&&s.children.length>0?{name:"submenu",fn:le(({context:Y})=>[me(S,{parentMenuItemContext:Y,items:s.children,maxWidth:s.maxWidth,minWidth:s.minWidth,maxHeight:s.maxHeight,adjustPosition:s.adjustSubMenuPosition!==void 0?s.adjustSubMenuPosition:n(h).adjustPosition,direction:s.direction!==void 0?s.direction:n(h).direction},null,8,["parentMenuItemContext","items","maxWidth","minWidth","maxHeight","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),s.hidden!==!0&&(s.divided==="down"||s.divided===!0)?(b(),F(fe,{key:3})):z("",!0)],64))),128))])],512)]),_:3},8,["maxHeight"])],16)],8,["to"])):z("",!0)}}}),nt=te({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:Boolean,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(e,{expose:l,emit:a}){const r=e,d=a,t=qe(),h=R(),{options:i,show:I,container:m}=ue(r);xe(()=>{I.value&&$()}),Ce(()=>{P()}),ut(I,c=>{c?$():($e(k),P())});const k={closeMenu:M,isClosed:x,getMenuRef:()=>h.value,getMenuDimensions:()=>{var c;return((c=h.value)==null?void 0:c.getMenuDimensions())??{width:0,height:0}}};let B=!1;function $(){C(),it(k)}function M(c){B=!0,d("close",c),i.value.menuTransitionProps||d("closeAnimFinished"),$e(k)}function x(){return B}function C(){setTimeout(()=>{document.addEventListener("click",T,!0),document.addEventListener("contextmenu",T,!0),document.addEventListener("scroll",O,!0),!r.isFullScreenContainer&&m.value&&m.value.addEventListener("scroll",O,!0),i.value.keyboardControl!==!1&&document.addEventListener("keydown",w,!0)},50)}function P(){document.removeEventListener("contextmenu",T,!0),document.removeEventListener("click",T,!0),document.removeEventListener("scroll",O,!0),!r.isFullScreenContainer&&m.value&&m.value.removeEventListener("scroll",O,!0),i.value.keyboardControl!==!1&&document.removeEventListener("keydown",w,!0)}const v=R();q("globalSetCurrentSubMenu",c=>v.value=c),q("globalGetMenuHostId",m.value.id);function w(c){var g,H,E,K,J,_,p,A,V,X,y,ne,u;let f=!0;switch(c.key){case"Escape":{((g=v.value)==null?void 0:g.isTopLevel())===!1?(H=v.value)==null||H.closeCurrentSubMenu():M();break}case"ArrowDown":(E=v.value)==null||E.moveCurrentItemDown();break;case"ArrowUp":(K=v.value)==null||K.moveCurrentItemUp();break;case"Home":(J=v.value)==null||J.moveCurrentItemFirst();break;case"End":(_=v.value)==null||_.moveCurrentItemLast();break;case"ArrowLeft":{(p=v.value)!=null&&p.closeSelfAndActiveParent()||(V=(A=i.value).onKeyFocusMoveLeft)==null||V.call(A);break}case"ArrowRight":(X=v.value)!=null&&X.openCurrentItemSubMenu()||(ne=(y=i.value).onKeyFocusMoveRight)==null||ne.call(y);break;case"Enter":(u=v.value)==null||u.triggerCurrentItemClick(c);break;default:f=!1;break}f&&v.value&&(c.stopPropagation(),c.preventDefault())}function O(c){i.value.closeWhenScroll!==!1&&j(c.target,null)}function T(c){j(c.target,c)}function j(c,g){for(var H,E;c;){if(c.classList&&c.classList.contains("mx-context-menu"))return;c=c.parentNode}g?i.value.clickCloseOnOutside!==!1?(P(),M()):(E=(H=i.value).onClickOnOutside)==null||E.call(H,g):(P(),M())}return q("globalOptions",i),q("globalCloseMenu",M),q("globalIsFullScreenContainer",r.isFullScreenContainer),q("globalHasSlot",c=>t[c]!==void 0),q("globalRenderSlot",(c,g)=>D(t,c,{...g},()=>[be("span","Render slot failed")],!1)),q("menuContext",{zIndex:i.value.zIndex||Z.defaultZindex,container:m.value,adjustPadding:{x:0,y:0},getZoom:()=>i.value.zoom||Z.defaultZoom,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[i.value.x,i.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),l(k),(c,g)=>n(i).menuTransitionProps?(b(),F(Xe,ge({key:0,appear:""},n(i).menuTransitionProps,{onAfterLeave:g[0]||(g[0]=H=>d("closeAnimFinished"))}),{default:le(()=>[n(I)?(b(),F(ye,{key:0,ref_key:"submenuInstance",ref:h,items:n(i).items,adjustPosition:n(i).adjustPosition,maxWidth:n(i).maxWidth||n(Z).defaultMaxWidth,minWidth:n(i).minWidth||n(Z).defaultMinWidth,maxHeight:n(i).maxHeight,direction:n(i).direction||n(Z).defaultDirection},{default:le(()=>[D(c.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","maxHeight","direction"])):z("",!0)]),_:3},16)):n(I)?(b(),F(ye,{key:1,ref_key:"submenuInstance",ref:h,items:n(i).items,adjustPosition:n(i).adjustPosition,maxWidth:n(i).maxWidth||n(Z).defaultMaxWidth,minWidth:n(i).minWidth||n(Z).defaultMinWidth,maxHeight:n(i).maxHeight,direction:n(i).direction||n(Z).defaultDirection},{default:le(()=>[D(c.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","maxHeight","direction"])):z("",!0)}}),$t=te({__name:"ContextMenu",props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},emits:["update:show","close"],setup(e,{expose:l,emit:a}){const r=a,d=e,{options:t,show:h}=ue(d),{isNew:i,container:I,eleId:m}=tt(t.value),k=R(null),B=qe();function $(M){var x,C;r("update:show",!1),r("close"),(C=(x=t.value).onClose)==null||C.call(x,M)}return l({closeMenu:()=>r("update:show",!1),isClosed:()=>!h.value,getMenuRef:()=>{var M;return(M=k.value)==null?void 0:M.getMenuRef()},getMenuDimensions:()=>{var M;return((M=k.value)==null?void 0:M.getMenuDimensions())??{width:0,height:0}}}),(M,x)=>(b(),F(Qe,{to:`#${n(m)}`},[me(nt,{ref_key:"menuRef",ref:k,options:n(t),show:n(h),container:n(I),isFullScreenContainer:!n(i),onClose:$},Je({_:2},[Ge(n(B),(C,P)=>({name:P,fn:le(v=>[D(M.$slots,P,Ue(at(v)))])}))]),1032,["options","show","container","isFullScreenContainer"])],8,["to"]))}}),Et=te({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxHeight:{type:[String,Number],default:0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(e,l){const a=N("globalOptions"),{adjustSubMenuPosition:r,maxWidth:d,minWidth:t,maxHeight:h}=ue(e),i=typeof r.value<"u"?r.value:a.value.adjustPosition,I=R(),m=R();return l.expose({getSubMenuRef:()=>I.value,getMenuItemRef:()=>m.value}),()=>be(He,{...e,ref:m,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,maxHeight:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof l.slots.default!==void 0},l.slots.default?{submenu:k=>be(ye,{ref:I,maxWidth:d.value,minWidth:t.value,maxHeight:h.value,adjustPosition:i,parentMenuItemContext:k.context},{default:l.slots.default}),...vt(l.slots,"default")}:l.slots)}});function _t(e,l,a,r){const d=R(!0),t=be(nt,{options:e,show:d.value,container:l,isFullScreenContainer:!a,onCloseAnimFinished:()=>{je(null,l)},onClose:h=>{var i;(i=e.onClose)==null||i.call(e,h),d.value=!1}},r);return je(t,l),t.component}function Ze(e,l){const a=tt(e);return _t(e,a.container,a.isNew,l).exposed}const Nt={install(e){e.config.globalProperties.$contextmenu=Ze,e.component("ContextMenu",$t),e.component("ContextMenuItem",He),e.component("ContextMenuGroup",Et),e.component("ContextMenuSperator",fe),e.component("ContextMenuSeparator",fe),e.component("ContextSubMenu",ye)},showContextMenu(e,l){return Ze(e,l)},isAnyContextMenuOpen(){return st()},closeContextMenu:et,transformMenuPosition:rt};export{Nt as Z};
