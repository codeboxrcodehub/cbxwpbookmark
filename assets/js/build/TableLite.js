import{_ as G,z as J,D as w,J as S,Q as K,R as P,L as R,T as Q,E as W,o as n,b as o,a as l,u as c,t as u,e as h,f as j,h as X,F as p,q as C,U as H,s as D,V as I}from"./vue-router.js";const Y=J({name:"my-table",emits:["return-checked-rows","do-search","is-finished","get-now-page","row-clicked"],props:{translations:{type:Object,default:()=>({loading:"Loading...",first:"First",prev:"Prev",next:"Next",last:"Last"})},isLoading:{type:Boolean,require:!0},isReSearch:{type:Boolean,require:!0},hasCheckbox:{type:Boolean,default:!1},checkedReturnType:{type:String,default:"key"},title:{type:String,default:""},isFixedFirstColumn:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]},rowClasses:{type:[Array,Function],default:()=>[]},pageSize:{type:Number,default:10},total:{type:Number,default:100},page:{type:Number,default:1},sortable:{type:Object,default:()=>({order:"id",sort:"asc"})},messages:{type:Object,default:()=>({pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count:",gotoPageLabel:"Go to page:",noDataAvailable:"No data"})},isStaticMode:{type:Boolean,default:!1},isSlotMode:{type:Boolean,default:!1},isHidePaging:{type:Boolean,default:!1},pageOptions:{type:Array,default:()=>[{value:1,text:1},{value:5,text:5},{value:10,text:10},{value:25,text:25},{value:50,text:50}]},class:{type:String,default:""}},setup(e,{emit:i,slots:k}){let b=w(null),A=e.pageOptions.length>0?w(e.pageOptions[0].value):w(e.pageSize);e.pageOptions.length>0&&e.pageOptions.forEach(t=>{Object.prototype.hasOwnProperty.call(t,"value")&&Object.prototype.hasOwnProperty.call(t,"text")&&e.pageSize==t.value&&(A.value=t.value)});const v=w([]),s=w(!1),y=t=>{const g=v.value.indexOf(t[a.keyColumn]);g>-1?v.value.splice(g,1):v.value.push(t[a.keyColumn]),i("return-checked-rows",v.value)},r=()=>{s.value=!s.value,v.value=s.value?e.rows.map(t=>t.id):[]},O=t=>v.value.includes(t.id);S(s,t=>{v.value=t?e.rows.map(g=>g.id):[]});const a=K({isSlotMode:e.isSlotMode,isCheckAll:!1,isHidePaging:e.isHidePaging,keyColumn:P(()=>{let t="";return Object.assign(e.columns).forEach(g=>{g.isKey&&(t=g.field)}),t}),page:e.page,pageSize:A.value,maxPage:P(()=>{if(e.total<=0)return 0;let t=Math.floor(e.total/a.pageSize);return e.total%a.pageSize>0&&t++,t}),offset:P(()=>(a.page-1)*a.pageSize+1),limit:P(()=>{let t=a.page*a.pageSize;return e.total>=t?t:e.total}),paging:P(()=>{let t=a.page-2<=0?1:a.page-2;a.maxPage-a.page<=2&&(t=a.maxPage-4),t=t<=0?1:t;let g=[];for(let d=t;d<=a.maxPage;d++)g.length<5&&g.push(d);return g}),order:e.sortable.order,sort:e.sortable.sort,pageOptions:e.pageOptions}),L=P(()=>{let t=e.rows;var g=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});let d=a.sort==="desc"?-1:1;t.sort(function(m,$){return g.compare(m[a.order],$[a.order])*d});let f=[];for(let m=a.offset-1;m<a.limit;m++)t[m]&&f.push(t[m]);return R(function(){M()}),f}),z=w([]);e.hasCheckbox&&(Q(()=>{z.value=[]}),S(()=>a.isCheckAll,t=>{let g=[];z.value.forEach((d,f)=>{d&&(d.checked=t,d.checked&&(e.checkedReturnType=="row"?g.push(L.value[f]):g.push(d.value)))}),i("return-checked-rows",g)}));const U=t=>{t.stopPropagation();const g=v.value.indexOf(row[a.keyColumn]);t.target.checked?g===-1&&v.value.push(row[a.keyColumn]):g>-1&&v.value.splice(g,1),i("return-checked-rows",isChecked)},q=()=>{z.value.forEach(t=>{t&&t.checked&&(t.checked=!1)}),i("return-checked-rows",[])},F=t=>{let g="asc";t==a.order&&a.sort=="asc"&&(g="desc");let d=(a.page-1)*a.pageSize,f=a.pageSize;a.order=t,a.sort=g,i("do-search",d,f,t,g),a.isCheckAll?a.isCheckAll=!1:e.hasCheckbox&&q()},B=(t,g)=>{a.isCheckAll=!1;let d=a.order,f=a.sort,m=(t-1)*a.pageSize,$=a.pageSize;(!e.isReSearch||t>1||t==g)&&i("do-search",m,$,d,f,t)};S(()=>a.page,B),S(()=>e.page,t=>{t<=1?(a.page=1,i("get-now-page",a.page)):t>=a.maxPage?(a.page=a.maxPage,i("get-now-page",a.page)):a.page=t}),S(()=>a.pageSize,()=>{a.page===1?B(a.page,a.page):(a.page=1,a.isCheckAll=!1)}),S(()=>e.pageSize,t=>{a.pageSize=t});const T=()=>{if(a.page==1)return!1;a.page--},N=t=>{a.page=t},V=()=>{if(a.page>=a.maxPage)return!1;a.page++};S(()=>e.rows,()=>{(e.isReSearch||e.isStaticMode)&&(a.page=1),R(function(){e.isStaticMode||M()})});const E=(t,...g)=>t.replace(/{(\d+)}/g,function(d,f){return typeof g[f]<"u"?g[f]:d}),M=()=>{if(b.value){let t=b.value.getElementsByClassName("is-rows-el");i("is-finished",t)}i("get-now-page",a.page)};return W(()=>{R(()=>{e.rows.length>0&&M()})}),e.hasCheckbox?{slots:k,localTable:b,localRows:L,setting:a,rowCheckbox:z,checked:U,doSort:F,prevPage:T,movePage:N,nextPage:V,stringFormat:E,selectedRows:v,isCheckAll:s,toggleRowSelection:y,toggleCheckAll:r,isRowSelected:O}:{slots:k,localTable:b,localRows:L,setting:a,doSort:F,prevPage:T,movePage:N,nextPage:V,stringFormat:E}},mounted(){this.findValue({},"")},methods:{findValue(e,i){i=i.split(".");let k=e;return i.forEach(b=>{k[b.toString()]?k=k[b.toString()]:k=""}),typeof k>"u"?"":k}}}),Z={class:"vtl vtl-card"},_={class:"row"},x={key:0,class:"vtl-loading-mask"},ee={class:"vtl-loading-content"},te={style:{color:"white"}},ae={class:"table-responsive"},se={class:"vtl-thead"},le={class:"vtl-thead-tr"},ie={key:0,class:"vtl-thead-th vtl-checkbox-th"},ne=["onClick"],oe={class:"vtl-tbody"},ge=["onClick"],re={key:0,class:"vtl-tbody-td"},de=["value"],ue=["innerHTML"],pe={key:0},ce={key:1},ve=["onClick"],he={key:0,class:"vtl-tbody-td"},fe=["value","onChange"],ke={key:1},ye={key:2},be=["colspan"],me={key:0,class:"vtl-paging"},Ce={key:0,class:"row"},Se={class:"col-12-sm col-6-md"},we={class:"vtl-paging-info"},Pe={role:"status","aria-live":"polite"},ze={class:"col-12-sm col-6-md"},Ae={class:"vtl-paging-change-div"},Oe={class:"vtl-paging-count-label"},Le=["value"],Me={class:"vtl-paging-page-label"},$e=["value"],Re={key:0,class:"col-12-sm col-12-md"},je={class:"vtl-paging-pagination-div"},Fe={class:"dataTables_paginate"},Be={class:"vtl-paging-pagination-ul vtl-pagination"},Te={class:"sr-only"},Ne={class:"sr-only"},Ve=["onClick"],Ee={class:"sr-only"},He={class:"sr-only"};function De(e,i,k,b,A,v){return n(),o("div",Z,[l("div",_,[l("div",{class:c(["col-12",{"fixed-first-column":e.isFixedFirstColumn,"fixed-first-second-column":e.isFixedFirstColumn&&e.hasCheckbox}])},[e.isLoading?(n(),o("div",x,[l("div",ee,[l("span",te,u(e.translations.loading),1)])])):h("",!0),l("div",ae,[l("table",{class:c(["table table-striped table-bordered table-hover vtl-table vtl-table-hover vtl-table-bordered vtl-table-responsive vtl-table-responsive-sm",e.class]),ref:"localTable"},[l("thead",se,[l("tr",le,[e.hasCheckbox?(n(),o("th",ie,[l("div",null,[j(l("input",{type:"checkbox",class:"vtl-thead-checkbox","onUpdate:modelValue":i[0]||(i[0]=s=>e.setting.isCheckAll=s),onChange:i[1]||(i[1]=(...s)=>e.toggleCheckAll&&e.toggleCheckAll(...s))},null,544),[[X,e.setting.isCheckAll]])])])):h("",!0),(n(!0),o(p,null,C(e.columns,(s,y)=>(n(),o(p,null,[s.is_show?(n(),o("th",{class:c(["vtl-thead-th",s.headerClasses]),key:y},[l("div",{class:c(["vtl-thead-column",{"vtl-sortable":s.sortable,"vtl-both":s.sortable,"vtl-asc":e.setting.order===s.field&&e.setting.sort==="asc","vtl-desc":e.setting.order===s.field&&e.setting.sort==="desc"}]),onClick:r=>s.sortable?e.doSort(s.field):!1},u(s.label),11,ne)],2)):h("",!0)],64))),256))])]),l("tbody",oe,[e.isStaticMode?(n(!0),o(p,{key:0},C(e.localRows,(s,y)=>(n(),o("tr",{key:y,class:c(["vtl-tbody-tr",typeof e.rowClasses=="function"?e.rowClasses(s):e.rowClasses]),onClick:r=>e.$emit("row-clicked",s)},[e.hasCheckbox?(n(),o("td",re,[l("div",null,[l("input",{type:"checkbox",class:"vtl-tbody-checkbox",ref_for:!0,ref:r=>{e.rowCheckbox[y]=r},value:s[e.setting.keyColumn],onClick:i[2]||(i[2]=(...r)=>e.checked&&e.checked(...r))},null,8,de)])])):h("",!0),(n(!0),o(p,null,C(e.columns,(r,O)=>(n(),o(p,null,[r.is_show?(n(),o("td",{key:0,class:c(["vtl-tbody-td",r.columnClasses]),style:H(r.columnStyles)},[r.display?(n(),o("div",{key:0,innerHTML:r.display(s)},null,8,ue)):(n(),o(p,{key:1},[e.setting.isSlotMode&&e.slots[r.field]?(n(),o("div",pe,[D(e.$slots,r.field,{value:s})])):(n(),o("span",ce,u(e.findValue(s,r.field)),1))],64))],6)):h("",!0)],64))),256))],10,ge))),128)):(n(!0),o(p,{key:1},C(e.rows,(s,y)=>(n(),o("tr",{key:y,class:c(["vtl-tbody-tr",{"vtl-tbody-tr-checked":e.hasCheckbox&&e.isRowSelected(s)}]),onClick:r=>e.$emit("row-clicked",s)},[e.hasCheckbox?(n(),o("td",he,[l("div",null,[l("input",{type:"checkbox",class:"vtl-tbody-checkbox",ref_for:!0,ref:r=>{e.rowCheckbox[y]=r},value:s[e.setting.keyColumn],onChange:r=>(e.checked,e.toggleRowSelection(s))},null,40,fe)])])):h("",!0),(n(!0),o(p,null,C(e.columns,(r,O)=>(n(),o(p,null,[r.is_show?(n(),o("td",{key:0,class:c(["vtl-tbody-td",r.columnClasses]),style:H(r.columnStyles)},[r.display?(n(),o(p,{key:0},[],64)):(n(),o(p,{key:1},[e.setting.isSlotMode&&e.slots[r.field]?D(e.$slots,r.field,{key:0,value:s}):(n(),o("span",ke,u(e.findValue(s,r.field)),1))],64))],6)):h("",!0)],64))),256))],10,ve))),128)),e.rows.length<=0&&!e.isLoading?(n(),o("tr",ye,[l("td",{class:"vtl-tbody-td text-center",colspan:e.columns.filter(s=>s.is_show).length+1,height:"100"},u(e.messages.noDataAvailable),9,be)])):h("",!0)])],2)])],2)]),e.isLoading?h("",!0):(n(),o("div",me,[e.rows.length>0?(n(),o("div",Ce,[e.setting.isHidePaging?h("",!0):(n(),o(p,{key:0},[l("div",Se,[l("div",we,[l("div",Pe,u(e.stringFormat(e.messages.pagingInfo,e.setting.offset,e.setting.limit,e.total)),1)])]),l("div",ze,[l("div",Ae,[l("span",Oe,u(e.messages.pageSizeChangeLabel),1),j(l("select",{class:"vtl-paging-count-dropdown","onUpdate:modelValue":i[3]||(i[3]=s=>e.setting.pageSize=s)},[(n(!0),o(p,null,C(e.pageOptions,s=>(n(),o("option",{value:s.value,key:s.value},u(s.text),9,Le))),128))],512),[[I,e.setting.pageSize]]),l("span",Me,u(e.messages.gotoPageLabel),1),j(l("select",{class:"vtl-paging-page-dropdown","onUpdate:modelValue":i[4]||(i[4]=s=>e.setting.page=s)},[(n(!0),o(p,null,C(e.setting.maxPage,s=>(n(),o("option",{key:s,value:parseInt(s)},u(s),9,$e))),128))],512),[[I,e.setting.page]])])]),e.total>e.pageSize?(n(),o("div",Re,[l("div",je,[l("div",Fe,[l("ul",Be,[l("li",{class:c(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-first page-item",{disabled:e.setting.page<=1}])},[l("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-first page-link",href:"javascript:void(0)","aria-label":"Previous",onClick:i[5]||(i[5]=s=>e.setting.page=1)},[i[9]||(i[9]=l("span",{"aria-hidden":"true"},"«",-1)),l("span",Te,u(e.translations.first),1)])],2),l("li",{class:c(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-prev page-item",{disabled:e.setting.page<=1}])},[l("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-prev page-link",href:"javascript:void(0)","aria-label":"Previous",onClick:i[6]||(i[6]=(...s)=>e.prevPage&&e.prevPage(...s))},[i[10]||(i[10]=l("span",{"aria-hidden":"true"},"<",-1)),l("span",Ne,u(e.translations.prev),1)])],2),(n(!0),o(p,null,C(e.setting.paging,s=>(n(),o("li",{class:c(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-number page-item",{disabled:e.setting.page===s}]),key:s},[l("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-number page-link",href:"javascript:void(0)",onClick:y=>e.movePage(s)},u(s),9,Ve)],2))),128)),l("li",{class:c(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-next page-item",{disabled:e.setting.page>=e.setting.maxPage}])},[l("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-next page-link",href:"javascript:void(0)","aria-label":"Next",onClick:i[7]||(i[7]=(...s)=>e.nextPage&&e.nextPage(...s))},[i[11]||(i[11]=l("span",{"aria-hidden":"true"},">",-1)),l("span",Ee,u(e.translations.next),1)])],2),l("li",{class:c(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-last page-item",{disabled:e.setting.page>=e.setting.maxPage}])},[l("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-last page-link",href:"javascript:void(0)","aria-label":"Next",onClick:i[8]||(i[8]=s=>e.setting.page=e.setting.maxPage)},[i[12]||(i[12]=l("span",{"aria-hidden":"true"},"»",-1)),l("span",He,u(e.translations.last),1)])],2)])])])])):h("",!0)],64))])):h("",!0)]))])}const qe=G(Y,[["render",De]]);export{qe as T};
