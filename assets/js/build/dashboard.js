import{_ as C,r as l,o as r,b as _,a as o,t as s,d as n,F as w,q as B,e as d,i as L,j as O,k as g,l as S,p as q,H as P,I as V,A}from"./vue-router.js";import{C as F,A as H,p as N,a as E,b as I,B as R,c as j,L as M,d as U,D as W,e as Y,m as T}from"./index.js";import{d as x}from"./vee-validate.js";F.register(H,N,E,I,R,j,M);const X={components:{Bar:U,Doughnut:W,flatPickr:Y},data(){return{flatPickerConf:{plugins:[new T({shorthand:!0,dateFormat:"Y-m",altFormat:"F Y"})],altInput:!0,defaultDate:new Date},selectedDate:null,bookmarkCategoriesData:{},cbxwpbookmark_vue_var,dashboard_data:cbxwpbookmark_vue_var.dashboard_data,dailyBookmarkData:{},barChartOptions:{responsive:!0,plugins:{legend:{display:!1}}},donutChartOptions:{responsive:!0},initialDataLoaded:!1,category_mode:cbxwpbookmark_vue_var.category_mode}},watch:{selectedDate(t){this.onDateChange(t)}},created(){this.getOverviewData()},methods:{async getOverviewData(){let t="";if(this.selectedDate){const[e,v]=this.selectedDate.split("-");let i=new URLSearchParams;i.set("year",e),i.set("month",v),i=i.toString(),t=cbxwpbookmark_vue_var.rest_end_points.dashboard_overview+"?"+i}else t=cbxwpbookmark_vue_var.rest_end_points.dashboard_overview;await this.axios.get(t).then(e=>{e.data.success&&Object.keys(e.data.dailyBookmarkData).length>0&&(this.dailyBookmarkData=e.data.dailyBookmarkData,this.bookmarkCategoriesData=e.data.bookmarkCategoriesData,this.initialDataLoaded=!0)})},onDateChange(t){this.getOverviewData()}}},z={class:"container"},G={class:"row"},J={class:"col-12 mb-20"},K={class:"wp-heading-wrap"},Q={class:"wp-heading-wrap-left pull-left"},Z={class:"wp-heading-inline wp-heading-inline-cbxwpbookmark"},$={class:"wp-heading-wrap-right pull-right"},oo={class:"button_actions button_actions-global-menu"},ao={class:"dropdown dropdown-menu ml-10"},so={class:"button outline primary icon icon-only"},eo={class:"cbx-icon"},to={class:"card card-menu card-menu-right"},ro={id:"dashboard_menus"},_o=["href","title"],io={class:"container"},no={class:"row"},co={class:"col-12"},lo={id:"dashboard_global_wrapper"},ho={class:"dashboard_section_header row"},bo={class:"col-6 dashboard_section_header_l"},vo={id:"dashboard_core_vitals"},mo={class:"dashboard_core_vitals_wrap row"},uo={class:"dashboard_core_vitals_l col-12"},ko={class:"row dashboard_core_vitals_l_wrap"},po={class:"dashboard_core_vital dashboard_core_vital_bookmark col-4"},wo={class:"core_vital_header"},go={class:"icon icon-bookmarks"},xo={class:"cbx-icon"},yo={class:"core_vital_content"},fo=["href"],Do={key:1},Co={key:0,class:"dashboard_core_vital dashboard_core_vital_cat col-4"},Bo={class:"core_vital_header"},Lo={class:"icon icon-category"},Oo={class:"cbx-icon"},So={class:"core_vital_content"},qo=["href"],Po={key:1},Vo={class:"dashboard_section_header row"},Ao={class:"col-6 dashboard_section_header_l"},Fo={class:"col-6 dashboard_section_header_r"},Ho={id:"dashboard_monthly_x",class:"row"},No={class:"col-8 monthly_x_big_plot"},Eo={id:"monthly_x_big_plot_wrapper"},Io={class:"monthly_x_header"},Ro={key:0,class:"monthly_x_content"},jo={class:"col-4 monthly_x_small_plot"},Mo={key:0,id:"monthly_x_small_plot_wrapper"},Uo={class:"monthly_x_header"},Wo={key:0,class:"monthly_x_content"};function Yo(t,e,v,i,a,Go){var m,u,k,p;const b=l("inline-svg"),y=l("flat-pickr"),f=l("Bar"),D=l("Doughnut");return r(),_(w,null,[o("div",z,[o("div",G,[o("div",J,[o("div",K,[o("div",Q,[o("h1",Z,s(a.cbxwpbookmark_vue_var.translation.bookmark_manager),1)]),o("div",$,[o("div",oo,[o("details",ao,[o("summary",so,[o("i",eo,[n(b,{src:a.cbxwpbookmark_vue_var.icons_url+"icon_more_v.svg"},null,8,["src"])]),e[1]||(e[1]=o("span",{class:"sr-only"},null,-1))]),o("div",to,[o("ul",ro,[(r(!0),_(w,null,B(a.cbxwpbookmark_vue_var.dashboard_menus,c=>(r(),_("li",null,[o("a",{href:c.url,class:"button outline dashboard_menu dashboard_menu_",role:"button",title:c.title},s(c.label),9,_o)]))),256))])])])])])])])])]),o("div",io,[o("div",no,[o("div",co,[o("div",lo,[o("div",ho,[o("div",bo,[o("h2",null,s(a.cbxwpbookmark_vue_var.translation.dashboard.dashboard_overview),1),o("p",null,s(a.cbxwpbookmark_vue_var.translation.dashboard.quick_information),1)]),e[2]||(e[2]=o("div",{class:"col-6 dashboard_section_header_r"},null,-1))]),o("div",vo,[o("div",mo,[o("div",uo,[o("div",ko,[o("div",po,[o("div",wo,[o("div",go,[o("i",xo,[n(b,{src:a.cbxwpbookmark_vue_var.icons_url+"app/icon_bookmark.svg"},null,8,["src"])])]),o("h3",null,s(a.cbxwpbookmark_vue_var.translation.dashboard.bookmarks),1)]),o("div",yo,[(u=(m=a.cbxwpbookmark_vue_var)==null?void 0:m.user_capabilities)!=null&&u.cbxwpbookmark_log_manage?(r(),_("a",{key:0,href:a.cbxwpbookmark_vue_var.admin_url+"admin.php?page=cbxwpbookmark-logs#/"},s(a.dashboard_data.bookmark_count)+" "+s(a.cbxwpbookmark_vue_var.translation.dashboard.bookmarks_submitted),9,fo)):(r(),_("a",Do,s(a.dashboard_data.bookmark_count)+" "+s(a.cbxwpbookmark_vue_var.translation.dashboard.bookmarks_submitted),1))])]),a.category_mode!="no_cat"?(r(),_("div",Co,[o("div",Bo,[o("div",Lo,[o("i",Oo,[n(b,{src:a.cbxwpbookmark_vue_var.icons_url+"app/icon_category.svg"},null,8,["src"])])]),o("h3",null,s(a.cbxwpbookmark_vue_var.translation.dashboard.categories),1)]),o("div",So,[(p=(k=a.cbxwpbookmark_vue_var)==null?void 0:k.user_capabilities)!=null&&p.cbxwpbookmark_category_manage?(r(),_("a",{key:0,href:a.cbxwpbookmark_vue_var.admin_url+"admin.php?page=cbxwpbookmark-cats#/"},s(a.dashboard_data.cats_count)+" "+s(a.cbxwpbookmark_vue_var.translation.dashboard.categories_created),9,qo)):(r(),_("a",Po,s(a.dashboard_data.cats_count)+" "+s(a.cbxwpbookmark_vue_var.translation.dashboard.categories_created),1))])])):d("",!0)])])])]),o("div",Vo,[o("div",Ao,[o("h2",null,s(a.cbxwpbookmark_vue_var.translation.dashboard.bookmark_submission_overview),1),o("p",null,s(a.cbxwpbookmark_vue_var.translation.dashboard.quick_overview_of_monthly),1)]),o("div",Fo,[n(y,{modelValue:a.selectedDate,"onUpdate:modelValue":e[0]||(e[0]=c=>a.selectedDate=c),config:a.flatPickerConf},null,8,["modelValue","config"])])]),o("div",Ho,[o("div",No,[o("div",Eo,[o("div",Io,[o("h3",null,s(a.cbxwpbookmark_vue_var.translation.dashboard.monthly_bookmark_submission_overview),1)]),a.initialDataLoaded?(r(),_("div",Ro,[n(f,{id:"my-chart-id",options:a.barChartOptions,data:a.dailyBookmarkData},null,8,["options","data"])])):d("",!0)])]),o("div",jo,[a.category_mode=="global_cat"?(r(),_("div",Mo,[o("div",Uo,[o("h3",null,s(a.cbxwpbookmark_vue_var.translation.dashboard.bookmark_overview_by_cat),1)]),a.initialDataLoaded?(r(),_("div",Wo,[n(D,{data:a.bookmarkCategoriesData,options:a.donutChartOptions},null,8,["data","options"])])):d("",!0)])):d("",!0)])])])])])])],64)}const To=C(X,[["render",Yo]]),Xo=L(),zo=O({history:Xo,routes:[{path:"/",component:To}]});x("required",t=>!!t||"This field is required.");x("email",t=>/.+@.+\..+/.test(t)||"Must be a valid email.");g.defaults.headers.common["X-WP-Nonce"]=cbxwpbookmark_vue_var.rest_nonce;const h=S(A);h.use(q,g);h.use(P);h.component("inline-svg",V);h.use(zo).mount("#cbxwpbookmark-gdashboard");
