import{_ as C,S as U,m as F,r as u,o as c,c as x,w as m,a as t,t as r,n as L,e as f,b as d,d as b,f as g,v as O,g as A,h as y,F as M,q as T,s as J,u as E,x as K,y as D,z as V,i as H,j as z,k as B,l as W,I as j,p as X,H as Y,A as G}from"./vue-router.js";import{d as Q,v as Z}from"./VueFinalModal.esm.js";import{W as $}from"./cbxwpbookmark-head.js";import{T as tt}from"./TableLite.js";import{d as et,F as st,a as ot,E as at}from"./vee-validate.js";const it={name:"List",components:{WpHead:$,TableLite:tt},async mounted(){let o=[],s=await localStorage.getItem(this.localStorageListingKey);s&&(s=JSON.parse(s),Array.isArray(s)&&s.length&&s.forEach(a=>{a.user_id===this.current_user_id&&(o=a.columns)})),Array.isArray(o)&&o.length===0&&(o=["id","name","user","privacy","add_date","action"]),this.table_col_show=o,this.table.columns=await this.set_table_columns(),this.$route.query.page&&this.pagination(this.$route.query.page),this.$route.query.limit&&(this.limit=Number(this.$route.query.limit)),this.$route.query.order_by&&this.$route.query.sort&&(this.table.sortable.order=this.$route.query.order_by,this.table.sortable.sort=this.$route.query.sort,this.order_by(this.$route.query.order_by,this.$route.query.sort)),this.setFilterFromLoacalStorage()},watch:{table_col_show:{deep:!0,handler(o){let s={user_id:this.current_user_id,columns:o},a=JSON.parse(localStorage.getItem(this.localStorageListingKey)),n=!1;a?(a.forEach((e,i)=>{e.user_id===this.current_user_id&&(a[i].columns=o,n=!0)}),n===!1&&a.push(s),localStorage.setItem(this.localStorageListingKey,JSON.stringify(a))):localStorage.setItem(this.localStorageListingKey,JSON.stringify([s])),this.table.columns=this.set_table_columns()}}},data(){return{cbxwpbookmark_vue_var,current_user_id:cbxwpbookmark_vue_var==null?void 0:cbxwpbookmark_vue_var.user_data.id,table_col_show:[],localStorageListingKey:"cbxwpbookmark_category_list",dataLoading:!1,editId:0,cbx_table_lite:cbxwpbookmark_vue_var.cbx_table_lite,userRoles:cbxwpbookmark_vue_var.user_roles,filterStatus:"",table:{isLoading:!0,columns:[],rows:[],totalRecordCount:0,sortable:{order:"id",sort:"desc"}},paginationInfo:{},queryStr:"",limit:10,searchText:"",searchRole:"",selectedRows:[],flatPickerConf:{mode:"range",dateFormat:"Y-m-d"},total_count:0,translations:cbxwpbookmark_vue_var.translation}},methods:{async doSearch(o,s,a,n,e=1){this.limit=s,await this.pagination(e),this.table.sortable.order=a,this.table.sortable.sort=n,await this.order_by(this.table.sortable.order,this.table.sortable.sort),this.table.isLoading=!0,this.$router.push("/?"+this.queryStr),this.axios.get(cbxwpbookmark_vue_var.rest_end_points.getCategories+"?"+this.queryStr).then(i=>{var _;i.data.success?(this.total_count=i.data.data.total,this.table.rows=i.data.data.data,delete i.data.data.data,this.paginationInfo=i.data.data,this.table.totalRecordCount=this.paginationInfo.total):(this.errorMessage((_=i==null?void 0:i.data)==null?void 0:_.info),this.paginationInfo={},this.table.rows=[]),this.dataLoading=!1}).catch(i=>{this.dataLoading=!1,this.paginationInfo={},this.table.rows=[],this.errorMessage(i)})},pagination(o){let s=new URLSearchParams(this.queryStr);o?s.set("page",o):s.delete("page"),this.limit?s.set("limit",this.limit):s.delete("limit"),this.queryStr=s.toString()},async order_by(o,s){let a=new URLSearchParams(this.queryStr);this.queryStr=a.toString(),o?a.set("order_by",o):a.delete("order_by"),s?a.set("sort",s):a.delete("sort"),await this.handleLocalStorage("order",o),await this.handleLocalStorage("sort",s),this.queryStr=a.toString()},deleteCategory(o){U.fire({title:cbxwpbookmark_vue_var.translation.delete_confirmation_title,text:cbxwpbookmark_vue_var.translation.delete_confirmation_txt,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",customClass:{container:"swal2-container-cbx"},confirmButtonText:cbxwpbookmark_vue_var.translation.delete_btn_txt}).then(s=>{s.isConfirmed&&this.axios.get(cbxwpbookmark_vue_var.rest_end_points.deleteCategory+"?id="+o).then(a=>{a.data.success?(this.successMessage(a.data.info),this.selectedRows=[],this.doSearch(0,this.limit,this.table.sortable.order,this.table.sortable.sort)):this.errorMessage(a.data.info)}).catch(a=>{})})},async searchUser(){this.dataLoading=!0;let o=new URLSearchParams(this.queryStr);this.searchText?o.set("search",this.searchText):o.delete("search"),await this.handleLocalStorage("search",this.searchText),this.filterStatus?o.set("status",this.filterStatus):o.delete("status"),await this.handleLocalStorage("status",this.filterStatus),this.queryStr=o.toString(),await this.doSearch(0,this.limit,this.table.sortable.order,this.table.sortable.sort)},async searchUserFromLocalStorage(){this.dataLoading=!0;let o=new URLSearchParams(this.queryStr);this.searchText?o.set("search",this.searchText):o.delete("search"),this.table.sortable.sort&&o.set("sort",this.table.sortable.sort),this.table.sortable.order&&o.set("order_by",this.table.sortable.order),this.queryStr=o.toString(),await this.doSearch(0,this.limit,this.table.sortable.order,this.table.sortable.sort)},async setFilterFromLoacalStorage(){let o=await JSON.parse(localStorage.getItem("cbxwpbookmark_category_list"));o&&o.forEach((s,a)=>{s.user_id===this.current_user_id&&(s!=null&&s.search&&!this.$route.query.search&&(this.searchText=s.search),s!=null&&s.sort&&!this.$route.query.sort&&(this.table.sortable.sort=s.sort),s!=null&&s.order&&!this.$route.query.order_by&&(this.table.sortable.order=s.order))}),await this.searchUserFromLocalStorage()},async handleLocalStorage(o,s){if(s){let a=await JSON.parse(localStorage.getItem("cbxwpbookmark_category_list"));a?(a.forEach((n,e)=>{n.user_id===this.current_user_id&&(a[e][o]=s)}),await localStorage.setItem("cbxwpbookmark_category_list",JSON.stringify(a))):(a={user_id:this.current_user_id,[o]:this.filterValue},await localStorage.setItem("cbxwpbookmark_category_list",JSON.stringify([a])))}else{let a=await JSON.parse(localStorage.getItem("cbxwpbookmark_category_list"));a&&(a.forEach((n,e)=>{n.user_id===this.current_user_id&&delete a[e][o]}),await localStorage.setItem("cbxwpbookmark_category_list",JSON.stringify(a)))}},clearFilter(){this.searchText="",this.searchUser()},checkedRows(o){this.selectedRows=o.map(s=>Number(s))},deleteSelectedItems(){U.fire({title:cbxwpbookmark_vue_var.translation.delete_confirmation_title,text:cbxwpbookmark_vue_var.translation.delete_confirmation_txt,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:cbxwpbookmark_vue_var.translation.delete_btn_txt,customClass:{container:"swal2-container-cbx"}}).then(o=>{o.isConfirmed&&this.axios.get(cbxwpbookmark_vue_var.rest_end_points.deleteCategory+"?id="+this.selectedRows.join(",")).then(s=>{if(s.data.success){this.successMessage(s.data.info),this.selectedRows=[];const a=document.querySelectorAll(".vtl-tbody-checkbox");typeof a<"u"&&a&&a.forEach(n=>{n.checked=!1}),document.querySelector(".vtl-thead-checkbox").checked=!1,this.doSearch(0,this.limit,this.table.sortable.order,this.table.sortable.sort)}else this.errorMessage(s.data.info)}).catch(s=>{this.errorMessage(s)})})},set_table_columns(){return[{label:cbxwpbookmark_vue_var.translation.id,field:"id",sortable:!0,isKey:!0,is_show:this.table_col_show.includes("id")},{label:cbxwpbookmark_vue_var.translation.title,field:"cat_name",is_show:this.table_col_show.includes("name"),sortable:!0},{label:cbxwpbookmark_vue_var.translation.user,field:"user.display_name",is_show:this.table_col_show.includes("user")},{label:cbxwpbookmark_vue_var.translation.privacy,field:"privacy",is_show:this.table_col_show.includes("privacy"),sortable:!0},{label:cbxwpbookmark_vue_var.translation.created_date,field:"created_date",is_show:this.table_col_show.includes("add_date"),sortable:!0},{label:cbxwpbookmark_vue_var.translation.updated_date,field:"formatted_updated_date",is_show:this.table_col_show.includes("mod_date")},{label:cbxwpbookmark_vue_var.translation.action,field:"action",sortable:!1,is_show:!0}]},onContextMenu(o,s){var n,e;o.preventDefault();const a=[];(n=cbxwpbookmark_vue_var==null?void 0:cbxwpbookmark_vue_var.user_capabilities)!=null&&n.cbxwpbookmark_category_edit&&a.push({label:this.cbxwpbookmark_vue_var.translation.edit,onClick:()=>{this.$router.push("edit/"+s.id)},icon:F("img",{src:this.cbxwpbookmark_vue_var.icons_url+"icon_edit.svg",style:{width:"16px",height:"16px","margin-right":"5px"}})}),(e=cbxwpbookmark_vue_var==null?void 0:cbxwpbookmark_vue_var.user_capabilities)!=null&&e.cbxwpbookmark_category_delete&&a.push({label:this.cbxwpbookmark_vue_var.translation.delete,onClick:()=>{this.deleteCategory(s.id)},icon:F("img",{src:this.cbxwpbookmark_vue_var.icons_url+"icon_delete.svg",style:{width:"16px",height:"16px","margin-right":"5px"}})}),a.length>0&&this.$contextmenu({x:o.clientX,y:o.clientY,items:a})}}},rt={class:"inside"},lt={class:"container"},nt={class:"row"},ct={class:"col-12"},_t={class:"cbx-sub-heading-wrap",id:"dashlisting_toolbar"},dt={class:"cbx-sub-heading-l"},bt={class:"cbx-sub-heading cbx-sub-heading-category cbx-sub-heading-catlist"},ut={class:"cbx-sub-heading-r"},ht={class:"cbx-listing-table-prebox-wrap cbx-listing-table-prebox-wrap-category cbx-listing-table-prebox-wrap-catlist"},mt={class:"container"},pt={class:"row"},gt={class:"col col-12"},vt={class:"cbx-listing-table-prebox-l pull-left"},kt=["title"],wt={class:"cbx-icon"},yt={class:"button-label"},ft={class:"sr-only"},xt={class:"cbx-listing-table-prebox-r pull-right"},St=["placeholder"],Ct=["title"],qt={key:0,class:"cbx-icon cbx-icon-search-white"},Lt={key:1,class:"cbx-icon cbx-icon-refresh-white"},Nt={class:"sr-only"},Rt=["title"],It={class:"cbx-icon"},Ut={class:"sr-only"},Ft={class:"dropdown dropdown-menu ml-10"},Mt=["title","aria-label"],Tt={class:"cbx-icon"},Et={class:"sr-only"},Vt={class:"card card-menu card-menu-right"},Bt={class:"checkbox_field"},Pt={for:"id"},Ot={class:"mt-5"},At={class:"checkbox_field"},Jt={for:"name"},Kt={class:"mt-5"},Dt={class:"checkbox_field"},Ht={for:"user"},zt={class:"mt-5"},Wt={class:"checkbox_field"},jt={for:"privacy"},Xt={class:"mt-5"},Yt={class:"checkbox_field"},Gt={for:"add_date"},Qt={class:"mt-5"},Zt={class:"checkbox_field"},$t={for:"mod_date"},te={class:"mt-5"},ee={class:"checkbox_field"},se={for:"action"},oe={class:"container"},ae={class:"button_actions"},ie={class:"cbx-icon"},re={class:"button-label"},le=["onClick","title"],ne={class:"cbx-icon"},ce={class:"button-label"};function _e(o,s,a,n,e,i){const _=u("router-link"),h=u("inline-svg"),p=u("table-lite"),N=u("wp-head");return c(),x(N,{heading:e.translations.category_manager,"class-name":"cbxwpbookmark-page-listing cbxwpbookmark-page-listing-category cbxwpbookmark-page-listing-catlist"},{default:m(()=>{var w,S;return[t("div",rt,[t("div",lt,[t("div",nt,[t("div",ct,[t("div",_t,[t("div",dt,[t("h2",bt,r(e.translations.category_list_heading),1)]),t("div",ut,[(S=(w=e.cbxwpbookmark_vue_var)==null?void 0:w.user_capabilities)!=null&&S.cbxwpbookmark_category_add?(c(),x(_,{key:0,to:"/create",class:"button primary pull-right"},{default:m(()=>[L(r(e.translations.add_new_category),1)]),_:1})):f("",!0)])])])])]),s[13]||(s[13]=t("div",{class:"cbx-listing-table-filters-wrap cbx-listing-table-filters-wrap-category cbx-listing-table-filters-wrap-catlist"},[t("div",{class:"container"},[t("div",{class:"row"},[t("div",{class:"col-12"},[t("div",{class:"cbx-listing-table-filters"})])])])],-1)),t("div",ht,[t("div",mt,[t("div",pt,[t("div",gt,[t("div",vt,[t("h3",null,r(e.translations.total)+": "+r(e.total_count),1),e.selectedRows.length>0?(c(),d("button",{key:0,role:"button",class:"button error icon icon-inline ml-5",onClick:s[0]||(s[0]=(...l)=>i.deleteSelectedItems&&i.deleteSelectedItems(...l)),title:e.translations.delete_all},[t("i",wt,[b(h,{src:e.cbxwpbookmark_vue_var.icons_url+"icon_delete.svg"},null,8,["src"])]),t("span",yt,r(e.translations.delete_all)+" ("+r(e.selectedRows.length)+")",1),t("span",ft,r(e.translations.buttons.delete.sr_label),1)],8,kt)):f("",!0)]),t("div",xt,[g(t("input",{style:{display:"inline-block","margin-right":"10px"},type:"text",class:"form-control",placeholder:e.translations.searchText,"onUpdate:modelValue":s[1]||(s[1]=l=>e.searchText=l),onKeyup:s[2]||(s[2]=A(l=>i.searchUser(),["enter"]))},null,40,St),[[O,e.searchText]]),t("button",{role:"button",class:"button primary icon icon-only",onClick:s[3]||(s[3]=l=>i.searchUser()),title:e.translations.buttons.search.title},[this.dataLoading?(c(),d("i",Lt)):(c(),d("i",qt)),t("span",Nt,r(e.translations.buttons.search.sr_label),1)],8,Ct),t("button",{role:"button",class:"button secondary icon icon-only icon-inline ml-5",onClick:s[4]||(s[4]=l=>i.clearFilter()),title:e.translations.buttons.reset.title},[t("i",It,[b(h,{src:e.cbxwpbookmark_vue_var.icons_url+"icon_reset.svg"},null,8,["src"])]),t("span",Ut,r(e.translations.buttons.reset.sr_label),1)],8,Rt),t("details",Ft,[t("summary",{class:"button outline primary icon icon-only",title:e.translations.buttons.filter.title,"aria-label":e.translations.buttons.filter.title},[t("i",Tt,[b(h,{src:e.cbxwpbookmark_vue_var.icons_url+"icon_funnel.svg"},null,8,["src"])]),t("span",Et,r(e.translations.buttons.filter.sr_label),1)],8,Mt),t("div",Vt,[t("ul",null,[t("li",null,[t("div",Bt,[g(t("input",{type:"checkbox",class:"magic-checkbox",id:"id",value:"id","onUpdate:modelValue":s[5]||(s[5]=l=>e.table_col_show=l)},null,512),[[y,e.table_col_show]]),t("label",Pt,r(e.translations.id),1)])]),t("li",Ot,[t("div",At,[g(t("input",{type:"checkbox",class:"magic-checkbox",id:"name","onUpdate:modelValue":s[6]||(s[6]=l=>e.table_col_show=l),value:"name"},null,512),[[y,e.table_col_show]]),t("label",Jt,r(e.translations.name),1)])]),t("li",Kt,[t("div",Dt,[g(t("input",{type:"checkbox",class:"magic-checkbox",id:"user","onUpdate:modelValue":s[7]||(s[7]=l=>e.table_col_show=l),value:"user"},null,512),[[y,e.table_col_show]]),t("label",Ht,r(e.translations.user),1)])]),t("li",zt,[t("div",Wt,[g(t("input",{type:"checkbox",class:"magic-checkbox",id:"privacy","onUpdate:modelValue":s[8]||(s[8]=l=>e.table_col_show=l),value:"privacy"},null,512),[[y,e.table_col_show]]),t("label",jt,r(e.translations.privacy),1)])]),t("li",Xt,[t("div",Yt,[g(t("input",{type:"checkbox",class:"magic-checkbox",id:"add_date","onUpdate:modelValue":s[9]||(s[9]=l=>e.table_col_show=l),value:"add_date"},null,512),[[y,e.table_col_show]]),t("label",Gt,r(e.translations.created_date),1)])]),t("li",Qt,[t("div",Zt,[g(t("input",{type:"checkbox",class:"magic-checkbox",id:"mod_date","onUpdate:modelValue":s[10]||(s[10]=l=>e.table_col_show=l),value:"mod_date"},null,512),[[y,e.table_col_show]]),t("label",$t,r(e.translations.updated_date),1)])]),t("li",te,[t("div",ee,[g(t("input",{type:"checkbox",class:"magic-checkbox",id:"action","onUpdate:modelValue":s[11]||(s[11]=l=>e.table_col_show=l),value:"action",disabled:""},null,512),[[y,e.table_col_show]]),t("label",se,r(e.translations.action),1)])])])])])])])])])]),t("div",oe,[b(p,{translations:e.cbx_table_lite,messages:{pagingInfo:e.translations.showing+" {0}-{1} "+e.translations.of+" {2}",pageSizeChangeLabel:e.translations.rowCount,gotoPageLabel:"     "+e.translations.goTo,noDataAvailable:e.translations.no_category_found},class:"cbx-listing-table cbx-listing-table-category cbx-listing-table-catlist mt-0","is-slot-mode":!0,"is-loading":e.table.isLoading,columns:e.table.columns,rows:e.table.rows,total:e.table.totalRecordCount,sortable:e.table.sortable,"page-size":e.limit,"has-checkbox":!0,onDoSearch:i.doSearch,onIsFinished:s[12]||(s[12]=l=>e.table.isLoading=!1),onReturnCheckedRows:i.checkedRows},{privacy:m(l=>[L(r(l.value.privacy_text),1)]),created_date:m(l=>[L(r(l.value.formatted_created_date),1)]),action:m(l=>{var k,q,R,I;return[t("div",ae,[(q=(k=e.cbxwpbookmark_vue_var)==null?void 0:k.user_capabilities)!=null&&q.cbxwpbookmark_category_edit?(c(),x(_,{key:0,to:"edit/"+l.value.id,class:"button primary icon icon-inline small"},{default:m(()=>[t("i",ie,[b(h,{src:e.cbxwpbookmark_vue_var.icons_url+"icon_edit.svg"},null,8,["src"])]),t("span",re,r(e.translations.edit),1)]),_:2},1032,["to"])):f("",!0),(I=(R=e.cbxwpbookmark_vue_var)==null?void 0:R.user_capabilities)!=null&&I.cbxwpbookmark_category_delete?(c(),d("a",{key:1,role:"button",target:"_blank",class:"button error icon icon-inline small",onClick:Ss=>i.deleteCategory(l.value.id),title:e.translations.buttons.delete.title},[t("i",ne,[b(h,{src:e.cbxwpbookmark_vue_var.icons_url+"icon_delete.svg"},null,8,["src"])]),t("span",ce,r(e.translations.delete),1)],8,le)):f("",!0)])]}),_:1},8,["translations","messages","is-loading","columns","rows","total","sortable","page-size","onDoSearch","onReturnCheckedRows"])])])]}),_:1},8,["heading"])}const de=C(it,[["render",_e]]),be={props:{heading:"",className:"",showBack:{type:Boolean,default(){return!0}},event_id:{type:Number,default:0},redirect:{type:String}},data(){return{cbxwpbookmark_vue_var}}},ue={class:"container"},he={class:"row"},me={class:"col-12"},pe={class:"wp-heading-wrap"},ge={class:"wp-heading-wrap-left pull-left"},ve={class:"wp-heading-inline wp-heading-inline-cbxwpbookmark"},ke={class:"wp-heading-wrap-right pull-right"},we={class:"button_actions button_actions-global-menu"},ye={class:"cbx-icon"},fe={class:"button-label"},xe=["href"],Se={class:"cbx-icon"},Ce={class:"button-label"},qe={class:"dropdown dropdown-menu ml-10"},Le={class:"button icon icon-only outline primary icon-inline"},Ne={class:"cbx-icon"},Re={class:"card card-menu card-menu-right"},Ie=["href","title"],Ue={id:"poststuff"},Fe={id:"post-body",class:"metabox-holder"},Me={id:"post-body-content"},Te={class:"meta-box-sortables ui-sortable"};function Ee(o,s,a,n,e,i){const _=u("inline-svg"),h=u("router-link");return c(),d("div",{class:E(["wrap cbx-chota",a.className])},[t("div",ue,[t("div",he,[t("div",me,[s[0]||(s[0]=t("h2",null,null,-1)),t("div",pe,[t("div",ge,[t("h1",ve,r(a.heading),1)]),t("div",ke,[t("div",we,[a.showBack&&!a.event_id?(c(),x(h,{key:0,to:"/",class:"button secondary icon icon-inline"},{default:m(()=>[t("i",ye,[b(_,{src:e.cbxwpbookmark_vue_var.icons_url+"icon_back.svg"},null,8,["src"])]),t("span",fe,r(e.cbxwpbookmark_vue_var.translation.back),1)]),_:1})):f("",!0),a.event_id?(c(),d("a",{key:1,href:e.cbxwpbookmark_vue_var.admin_url+"admin.php?page=cbxwpbookmarks#/edit/"+a.event_id+"/"+a.redirect,class:"button secondary icon icon-inline"},[t("i",Se,[b(_,{src:e.cbxwpbookmark_vue_var.icons_url+"icon_back.svg"},null,8,["src"])]),t("span",Ce,r(e.cbxwpbookmark_vue_var.translation.back_to_event),1)],8,xe)):f("",!0),t("details",qe,[t("summary",Le,[t("i",Ne,[b(_,{src:e.cbxwpbookmark_vue_var.icons_url+"icon_more_v.svg"},null,8,["src"])])]),t("div",Re,[t("ul",null,[(c(!0),d(M,null,T(e.cbxwpbookmark_vue_var.dashboard_menus,p=>(c(),d("li",null,[t("a",{href:p.url,class:"button outline",role:"button",title:p.title},r(p.label),9,Ie)]))),256))])])])])])])])])]),t("div",Ue,[t("div",Fe,[t("div",Me,[t("div",Te,[J(o.$slots,"default")])])]),s[1]||(s[1]=t("div",{class:"clear"},null,-1))])],2)}const Ve=C(be,[["render",Ee]]),Be={name:"Category Edit",components:{WpHeadAlt:Ve},props:{category_id:{type:Number,default(){return 0}}},mounted(){Number(this.category_id)?this.getCategory():this.category.user_id=this.selectedUser.id},data(){var o;return{cbxwpbookmark_vue_var,category_id:Number((o=this.$route.params)==null?void 0:o.id),serverErrors:{},translation:cbxwpbookmark_vue_var.translation,selectedUser:{},category:{cat_name:"",privacy:"1"},submitted:!1}},methods:{getCategory(){let o=cbxwpbookmark_vue_var.rest_end_points.getCategory+"?id="+this.category_id;this.axios.get(o).then(s=>{s.data.success?this.category=s.data.data:s.data.info&&this.errorMessage(s.data.info)})},async submitCategory(){var e;const{valid:o}=await this.$refs.form.validate();if(!o)return this.errorToast((e=this.cbxwpbookmark_vue_var.translation)==null?void 0:e.invalid_form_validation),!1;let s=this.category;const a=window.location.search;if(typeof a<"u"){let i=new URLSearchParams(a);i.has("event_id")&&(s.event_id=Number(i.get("event_id")),s.category=this.category)}let n=cbxwpbookmark_vue_var.rest_end_points.saveCategory;this.submitted=!0,this.axios.post(n,s).then(i=>{if(i.data.success)this.serverErrors={},i.data.info&&this.successMessage(i.data.info),this.$router.push("/edit/"+i.data.data.id);else if(this.serverErrors=i.data.errors,i.data.info)this.errorMessage(i.data.info);else if(i.data.errors){let _="";Object.entries(i.data.errors).forEach(([h,p])=>{_+=p+`
`}),this.errorMessage(_)}this.submitted=!1})}}},Pe={id:"cbxwpbookmark_builder_actions",class:"cbx_builder_actions"},Oe={class:"container"},Ae={class:"cbx_builder_actions_wrap cbxwpbookmark_builder_actions_wrap"},Je={class:"row"},Ke={class:"col-8 is-vertical-align"},De={key:0},He={key:1},ze={class:"col-4 is-right"},We={id:"cbxwpbookmark_builder_form",class:"transparent"},je={class:"cbxwpbookmark_form container"},Xe={class:"row"},Ye={class:"col-8"},Ge={id:"cbxwpbookmark-edit-main"},Qe={class:"row"},Ze={class:"col-12"},$e={class:"cbx_form_wrapper cbxwpbookmark_form_wrapper"},ts={class:"row"},es={class:"form-group col-12"},ss=["placeholder"],os={key:0,class:"form-group col-12"},as=["value"],is={class:"col col-4",style:{"margin-bottom":"0"}},rs={id:"cbxwpbookmark-edit-sidebar"},ls={class:"cbxwpbookmark-sidebar-widgets"},ns={class:"cbxwpbookmark-sidebar-widget"},cs={class:"cbxwpbookmark-sidebar-heading"},_s={class:"cbxwpbookmark-sidebar-content"},ds={class:"checkbox_field"},bs={class:"form-group nomargin d-flex"},us=["id","value"],hs=["for"];function ms(o,s,a,n,e,i){const _=u("Field"),h=u("ErrorMessage"),p=u("Form"),N=u("wp-head-alt");return c(),x(N,{heading:e.translation.category_manager,"class-name":"cbx-page-wrapper cbxwpbookmark-page-wrapper cbxwpbookmark-page-add-edit"},{default:m(()=>[t("div",Pe,[t("div",Oe,[t("div",Ae,[t("div",Je,[t("div",Ke,[Number(e.category_id)?(c(),d("h2",He,[t("span",null,r(e.translation.edit)+": "+r(e.translation.category)+"("+r(e.translation.id)+" : "+r(e.category_id)+")",1)])):(c(),d("h2",De,[t("span",null,r(e.translation.add),1)]))]),t("div",ze,[t("button",{class:E(["button primary ld-ext-right",e.submitted?"running":""]),onClick:s[0]||(s[0]=(...w)=>i.submitCategory&&i.submitCategory(...w))},[L(r(Number(e.category_id)?e.translation.update:e.translation.submit)+" ",1),s[3]||(s[3]=t("span",{class:"ld ld-spin ld-ring"},null,-1))],2)])])])])]),b(p,{ref:"form"},{default:m(()=>{var w,S;return[t("div",We,[t("div",je,[t("div",Xe,[t("div",Ye,[t("div",Ge,[t("div",Qe,[t("div",Ze,[t("div",$e,[t("div",ts,[t("div",es,[t("label",null,r(e.translation.name),1),b(_,{name:"name",modelValue:e.category.cat_name,"onUpdate:modelValue":s[1]||(s[1]=l=>e.category.cat_name=l),rules:"required"},{default:m(({field:l,errors:k})=>[t("input",K(l,{type:"text",class:["form-control",{error:!!k.length}],placeholder:e.translation.name}),null,16,ss)]),_:1},8,["modelValue"]),b(h,{name:"name",class:"invalid-feedback"})]),e.category_id?(c(),d("div",os,[t("label",null,r(e.translation.addBy),1),t("input",{value:(S=(w=e.category)==null?void 0:w.user)==null?void 0:S.display_name,type:"text",class:"form-control",readonly:""},null,8,as)])):f("",!0)])])])])])]),t("div",is,[t("div",rs,[t("div",ls,[t("div",ns,[t("h5",cs,r(e.translation.action),1),t("div",_s,[t("div",ds,[t("label",null,r(e.cbxwpbookmark_vue_var.translation.status),1),t("div",bs,[(c(!0),d(M,null,T(e.cbxwpbookmark_vue_var.categoryStatuses,(l,k)=>(c(),d("div",null,[g(t("input",{id:"status"+k,type:"radio",value:k,class:"form-control ml-5 magic-radio",style:{background:"unset"},"onUpdate:modelValue":s[2]||(s[2]=q=>e.category.privacy=q),name:"type_checkbox"},null,8,us),[[D,e.category.privacy]]),t("label",{for:"status"+k,class:"mr-5"},r(l),9,hs)]))),256))])])])])])])])])])])]}),_:1},512)]),_:1},8,["heading"])}const P=C(Be,[["render",ms]]),ps=V({name:"EditCategory",components:{Category:P},data(){var o;return{cbxwpbookmark_vue_var,category_id:Number((o=this.$route.params)==null?void 0:o.id)}}});function gs(o,s,a,n,e,i){const _=u("Category");return c(),x(_,{category_id:o.category_id},null,8,["category_id"])}const vs=C(ps,[["render",gs]]),ks=V({name:"Create Category",components:{Category:P},data(){var o;return{cbxwpbookmark_vue_var,category_id:Number((o=this.$route.params)==null?void 0:o.id)}}});function ws(o,s,a,n,e,i){const _=u("Category");return c(),x(_,{category_id:0})}const ys=C(ks,[["render",ws]]),fs=H(),xs=z({history:fs,routes:[{path:"/",component:de},{path:"/edit/:id",component:vs},{path:"/create",component:ys}]});et("required",o=>!!o||"This field is required.");B.defaults.headers.common["X-WP-Nonce"]=cbxwpbookmark_vue_var.rest_nonce;const v=W(G);v.use(Q);v.use(Z({key:"$vfm",componentName:"VueFinalModal",dynamicContainerName:"ModalsContainer"}));v.component("inline-svg",j);v.component("Form",st);v.component("Field",ot);v.component("ErrorMessage",at);v.use(X,B);v.use(Y);v.use(xs).mount("#cbxwpbookmark-category");
